### R²、MSE、RMSE 說明

這三個指標都是用來衡量迴歸模型預測的準確度。簡單來說，它們都在評估「模型的預測值」與「實際值」之間的差距。

---

### 1. R-squared (R² 或 決定係數)

R² 用來衡量模型對資料的解釋能力有多好。它的值介於 0 到 1 之間（理論上可能為負，表示模型比平均值還差）。

* **R² 接近 1**：表示模型能夠解釋大部分資料的變異性，模型的擬合效果很好。
* **R² 接近 0**：表示模型無法解釋資料的變異性，擬合效果很差。

白話來說，R² 就是告訴你，你的模型預測的準確度，比單純用「所有樣本的平均值」來預測，要好上多少。

#### 公式與參數說明

其數學公式為：

$$
R^2 = 1 - \frac{SS_{res}}{SS_{tot}} = 1 - \frac{\sum_{i=1}^{n}(y_i - \hat{y}_i)^2}{\sum_{i=1}^{n}(y_i - \bar{y})^2}
$$

| 符號 | 中文說明 | 詳細解釋 |
| :--- | :--- | :--- |
| $y_i$ | 第 i 個樣本的**實際值** | 真實的數據點。 |
| $\hat{y}_i$ | 第 i 個樣本的**模型預測值** | 模型根據輸入特徵所預測出來的結果。 |
| $\bar{y}$ | 所有樣本實際值的**平均數** | 數據的集中趨勢。 |
| $n$ | 樣本總數 | 資料集的總大小。 |
| $SS_{res}$ | 殘差平方和 (Residual Sum of Squares) | 模型預測值與實際值差距的平方總和，代表模型**無法解釋**的變異。 |
| $SS_{tot}$ | 總平方和 (Total Sum of Squares) | 實際值與其平均值差距的平方總和，代表資料**總共**的變異。 |

* **傳出值**: 傳出的資料類別為浮點數 (float)，範圍通常在 0 到 1 之間。

---

### 2. MSE (Mean Squared Error, 均方誤差)

MSE 是用來衡量「誤差」的指標。它會計算每個樣本的「預測值」與「實際值」差值的平方，然後再取平均。

因為有「平方」的計算，所以 MSE 會對較大的誤差給予更高的權重。MSE 的值越小，代表模型的預測越準確。

#### 公式與參數說明

其數學公式為：

$$
MSE = \frac{1}{n} \sum_{i=1}^{n}(y_i - \hat{y}_i)^2
$$

| 符號 | 中文說明 | 詳細解釋 |
| :--- | :--- | :--- |
| $y_i$ | 第 i 個樣本的**實際值** | 真實的數據點。 |
| $\hat{y}_i$ | 第 i 個樣本的**模型預測值** | 模型根據輸入特徵所預測出來的結果。 |
| $n$ | 樣本總數 | 資料集的總大小。 |

* **傳出值**: 傳出的資料類別為浮點數 (float)，值大於等於 0。

---

### 3. RMSE (Root Mean Squared Error, 均方根誤差)

RMSE 其實就是 MSE 的平方根。它解決了 MSE 因為平方運算後，單位與原始資料不一致的問題。

例如，如果你的目標是預測房價（單位：萬元），那麼 MSE 的單位會是「萬元平方」，這很難直觀理解；而 RMSE 的單位就是「萬元」，可以很直觀地解釋為「模型預測的平均誤差大約是多少萬元」。

與 MSE 一樣，RMSE 的值越小，代表模型的預測越準確。

#### 公式與參數說明

其數學公式為：

$$
RMSE = \sqrt{MSE} = \sqrt{\frac{1}{n} \sum_{i=1}^{n}(y_i - \hat{y}_i)^2}
$$

| 符號 | 中文說明 | 詳細解釋 |
| :--- | :--- | :--- |
| $y_i$ | 第 i 個樣本的**實際值** | 真實的數據點。 |
| $\hat{y}_i$ | 第 i 個樣本的**模型預測值** | 模型根據輸入特徵所預測出來的結果。 |
| $n$ | 樣本總數 | 資料集的總大小。 |

* **傳出值**: 傳出的資料類別為浮點數 (float)，值大於等於 0。

---

### 教學：小範例

假設我們有一個預測房價的模型，我們用了 4 筆資料來測試它。

* **實際房價 (y)**: `[100, 150, 200, 250]` (單位：萬)
* **模型預測價 (ŷ)**: `[110, 140, 210, 240]` (單位：萬)

#### 第 1 步：計算 MSE

1.  **計算每個樣本的誤差**：
    * $100 - 110 = -10$
    * $150 - 140 = 10$
    * $200 - 210 = -10$
    * $250 - 240 = 10$
2.  **計算誤差的平方**：
    * $(-10)^2 = 100$
    * $(10)^2 = 100$
    * $(-10)^2 = 100$
    * $(10)^2 = 100$
3.  **加總平方誤差並取平均**：
    * $MSE = \frac{100 + 100 + 100 + 100}{4} = \frac{400}{4} = 100$

所以，這個模型的 **MSE 是 100**。

#### 第 2 步：計算 RMSE

1.  **將 MSE 開根號**：
    * $RMSE = \sqrt{100} = 10$

所以，這個模型的 **RMSE 是 10**。這可以很直觀地解釋為：「這個房價預測模型，平均來說大概有 10 萬元的誤差。」

#### 第 3 步：計算 R²

1.  **計算殘差平方和 ($SS_{res}$)**：
    * 這就是我們在算 MSE 時，加總的那個平方誤差。
    * $SS_{res} = 100 + 100 + 100 + 100 = 400$
2.  **計算實際值的平均數 ($\bar{y}$)**：
    * $\bar{y} = \frac{100 + 150 + 200 + 250}{4} = \frac{700}{4} = 175$
3.  **計算總平方和 ($SS_{tot}$)**：
    * $(100 - 175)^2 = (-75)^2 = 5625$
    * $(150 - 175)^2 = (-25)^2 = 625$
    * $(200 - 175)^2 = (25)^2 = 625$
    * $(250 - 175)^2 = (75)^2 = 5625$
    * $SS_{tot} = 5625 + 625 + 625 + 5625 = 12500$
4.  **計算 R²**：
    * $R^2 = 1 - \frac{SS_{res}}{SS_{tot}} = 1 - \frac{400}{12500} = 1 - 0.032 = 0.968$

所以，這個模型的 **R² 是 0.968**。這個值非常接近 1，表示我們的模型解釋了 96.8% 的數據變異，是一個相當不錯的模型！